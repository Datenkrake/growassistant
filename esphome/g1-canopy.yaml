esphome:
  name: g1-canopy
  friendly_name: G1_CANOPY

esp32:
  board: esp32-c3-devkitm-1
  framework:
    type: arduino

# Enable logging
logger:

# Enable Home Assistant API
api:
  encryption:
    key: "w3Ll55YCHSdu8tj12EAq5Xr72upLPtEXSTI5jckiibE="

ota:
  - platform: esphome
    password: "552ee6f911d97dd2644ae7f53f972e15"

wifi:
  ssid: !secret wifi_ssid
  password: !secret wifi_password

  # Enable fallback hotspot (captive portal) in case wifi connection fails
  ap:
    ssid: "G1-Canopy Fallback Hotspot"
    password: "zyRlPuMkWQ2v"

captive_portal:

  # Example configuration entry for ESP32
i2c:
  sda: 7
  scl: 6
  scan: true
  id: bus_a
  frequency: 50kHz

bme68x_bsec2_i2c:
  address: 0x77
  model: bme680
  operating_age: 28d
  sample_rate: LP
  supply_voltage: 3.3V
  temperature_offset: 2.5


# Example configuration entry
sensor:
  - platform: bh1750
    name: "G1 BH1750 Illuminance"
    address: 0x23
    update_interval: 1s
    i2c_id: bus_a
    filters:
      - exponential_moving_average:
          alpha: 0.1  # Adjust this value for stronger or weaker , 0 to 1
          send_every: 5

  - platform: ultrasonic
    trigger_pin: 1
    echo_pin: 2
    name: "G1 Light Distance Sensor"
    update_interval: 1s
    timeout: 2m
    filters:
    - sliding_window_moving_average:
        window_size: 60
        send_every: 60

  - platform: bme68x_bsec2
    temperature:
      name: "BME680 Temperature"
    pressure:
      name: "BME680 Pressure"
    humidity:
      name: "BME680 Humidity"
    iaq:
      name: "BME680 IAQ"
      id: iaq
    co2_equivalent:
      name: "BME680 CO2 Equivalent"
    breath_voc_equivalent:
      name: "BME680 Breath VOC Equivalent"


